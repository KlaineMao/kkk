<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="../css/style.css" />
	<link rel="stylesheet" type="text/css" href="../css/stylelg.css" />
	<!-- <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script> -->
	<title>管理界面</title>
	<style type="text/css">
		body {
			font-size: 84%;

			line-height: 1.4;
		}
		.new {
			height: 40px;
			width: 700px;
			font-size: 23px;
			color: #111111;
			padding-left: 15px;
			padding-top: 4px;
			border: 2px solid rgba(219, 49, 39,0.5);
			margin-top: 10px;
			border-radius: 15px;
		}
		.new:hover {
			color: #9e2a2c;
		}
		a {
			color: rgb(219, 35, 38);
		}

		#Searchresult {
			width: 700px;
			height: 600px;
			padding: 20px;
			background: rgb(248, 248, 248);
		}
		.pagination a {
			text-decoration: none;
			border: 1px solid rgb(226, 64, 89);
			color: rgb(219, 35, 38);
		}

		.pagination a,
		.pagination span {
			display: inline-block;
			padding: 0.1em 0.4em;
			margin-right: 5px;
			margin-bottom: 5px;
		}

		.pagination .current {
			color: rgb(219, 35, 38);
			border: 1px solid rgb(226, 64, 89);
		}

		.pagination .current.prev,
		.pagination .current.next {
			color: rgb(219, 35, 38);
			border: 1px solid rgb(226, 64, 89);
		}

	</style>
	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/jquery.pagination.js"></script>

	<!--		<script type="text/javascript" src="../js/redchina.js"></script>-->
</head>
<body>
<!-- 内容 -->
<div class="introduce">
	<div class="all">
		<div class="bigpic">
			<div style="cursor: pointer; width: 45px;height: 30px;background-color: #9E2A2C;color: white; " id="add">增加内容</div>
			<div style="margin-left: 50px; margin-top: 15px; width: 700px;">
				<div id="Searchresult">分页初始化完成后这里的内容会被替换。</div>
				<div id="hiddenresult">
					<!-- 列表元素 -->

				</div>
				<div id="Pagination" class="pagination" style="position: relative; left: 230px;margin-top: 15px;">
					<!-- 这里显示分页 -->
				</div>
			</div>
		</div>
		<div class="tips">
			<span style="margin-top: 26px;"><a href="redchina.html">红色中国</a></span>
			<span style="margin-top: 5px;"><a href="#">学习文化</a></span>
			<span style="margin-top: 5px;"><a href="strong.html">强军兴军</a></span>
		</div>
	</div>
</div>
<script type="text/javascript" src="../js/index.js"></script>
<!-- 左侧导航 -->
<div class="menu">
	<div class="navigation">
		<ul>
			<li>
				<a href="newsHome.html">
					<span class="icon"><i class="fa fa-home"></i></span>
					<span class="title">首页</span>
				</a>
			</li>
			<li>
				<a href="login.html">
					<span class="icon"><i class="fa fa-user"></i></span>
					<span class="title">个人界面</span>
				</a>
			</li>
			<li>
				<a href="#">
					<span class="icon"><i class="fa fa-comment"></i></span>
					<span class="title">最新新闻</span>
				</a>
			</li>
			<li>
				<a href="#" id="sousuo">
					<span class="icon"><i class="fa fa-question-circle"></i></span>
					<span class="title">搜索</span>
				</a>
			</li>
			<li>
				<a href="#">
					<span class="icon"><i class="fa fa-cog"></i></span>
					<span class="title">管理文章</span>
				</a>
			</li>
			<li>
				<a href="#" id="xiu">
					<span class="icon"><i class="fa fa-lock"></i></span>
					<span class="title">修改密码</span>
				</a>
			</li>
			<li>
				<a href="#">
					<span class="icon"><i class="fa fa-sign-out"></i></span>
					<span class="title">退出登录</span>
				</a>
			</li>
		</ul>
	</div>
	<div class="toggle"></div>
</div>
<script>
	const navigation = document.querySelector('.navigation');
	document.querySelector('.toggle').onclick = function(){
		this.classList.toggle('active');
		navigation.classList.toggle('active');
	}
</script>
<div class="input" id="inpu">
	<div class="register" style="margin-left: 40px;">
		<img src="../img/close.png" width="30px" height="30px"  id="close" style="position: relative; margin-left: 415px; margin-top: 5px;cursor: pointer;"/>
		<div class="row2" style="margin-left: -25px;">
			<div class="flex" style="margin-top: 0px;">
				<input type="text" class="number" style="margin-top: 18px; width: 250px;" id="getCode" placeholder=""/>
				<div class="SC1" style="margin-top: 18px;" id="getit">点击搜索</div>
			</div>
		</div>
	</div>
</div>
<div class="input" id="inp"style="z-index: -1; position: fixed;">
	<div class="login" style="height: 400px;">
		<div class="flex">
			<input class="user" id="oldpassword" placeholder="请输入改前的密码" style="width: 300px;position: relative;top: 0px;left: -80px;"/>
			<input class="user" id="changepassword" placeholder="请输入改后的密码" style="width: 300px;position: relative;top: 60px;left: -480px;"/>
			<div class="log" style="position: relative;top: 70px;left: -50px;" id="sureit" >确定</div>
			<div class="log" style="position: relative;top: 70px;left: -50px;" id="canc" >取消</div>
		</div>
	</div>
</div>
<script type="text/javascript" src="../js/index.js"></script>
<script>
	$("#add").click(function(){
		var title = prompt("请输入文章标题");
		var div = document.createElement("div"); {
					div.setAttribute("height", "40px");
					console.log("-");
					div.setAttribute("class", "new");
					div.setAttribute("onclick","neirong();");
				}
				var all = document.getElementById("Searchresult");
				all.appendChild(div);
				div.setAttribute("value","title");
				div.innerHTML = title;
	});
	$(document).ready(function() {
		var data = {
			"moudle": "hszg",
			"nowPage": 1
		}
		$.ajax({
			url: "http://localhost:8080/Project_war/PageTitleServlet", //后端给的网址
			type: "POST", //POST,GET
			dataType: "json", //后端给的格式
			contentType: "application/json;charset=UTF-8", //统一，可以不写，但有时会交互失败
			data: JSON.stringify(data), //传给后端的内容，无则空
			//传给后端的内容，无则空
			success: function(data) {

				//data是后端传来的json
				var jsonObj = eval(data);
				var totalData = jsonObj.totalData;

				var totalPage = jsonObj.totalPage;
				$(function() {

					var num_entries = totalPage;
					// 创建分页
					$("#Pagination").pagination(num_entries, {
						num_edge_entries: 1, //边缘页数
						num_display_entries: 4, //主体页数
						callback: pageselectCallback,
						items_per_page: 1 //每页显示10项
					});

					function pageselectCallback(page_index, jq) {
						var new_content = document.createElement("div"); {
							new_content.setAttribute("class", "result");
						}
						var div = document.createElement("div"); {
							div.setAttribute("height", "40px");
							div.setAttribute("class", "new");
						}
						$("#Searchresult").empty().append(new_content); //装载对应分页的内容
						console.log("1");

						var data = {
							moudle: "hszg",
							nowPage: page_index + 1
						};
						console.log(page_index);
						$.ajax({
							url: "http://localhost:8080/Project_war/PageTitleServlet", //后台请求的数据，用的是PHP
							dataType: "json", //数据格式
							type: "post", //请求方式
							async: false, //是否异步请求
							contentType: "application/json;charset=UTF-8", //统一，可以不写，但有时会交互失败
							data: JSON.stringify(data),
							success: function(data) { //如果请求成功，返回数据。
								console.log("!");
								var jsonObj = eval(data);

								var list = new Array(jsonObj.list.length);
								console.log(jsonObj.list.length);
								for (var i = 0; i < list.length; i++) {
									list[i] = jsonObj.list[i];

								}


								var search = document.getElementById(
										"Searchresult");
								search.appendChild(new_content); //装载对应分页的内容

								for (var j = 0; j < jsonObj.list.length; j++) {
									var div = document.createElement("div"); {
										div.setAttribute("height", "40px");
										console.log("-");
										div.setAttribute("class", "new");
										div.setAttribute("onclick","neirong();");
									}
									var lianjie=document.createElement("a");
									var lianjie10=document.createElement("a");
									
									lianjie10.innerHTML="删除";
									lianjie10.setAttribute()
									new_content.appendChild(div);
									div.appendChild(lianjie);
									div.appendChild(lianjie10);
									lianjie.innerHTML="修改";
									lianjie10.innerHTML="删除";
									div.setAttribute("value", list[j]);
									lianjie10.setAttribute("href","javascript:;");
									div.innerHTML = list[j];
									lianjie10.onclick=function() {
										confirm("确定要删除吗？");
										div.remove();
									}
									lianjie.setAttribute("href","javascript:;");
									lianjie.setAttribute("onclick",'{if(confirm("确定要修改这名学生的成绩吗？")) {change(this); }else {}}');
								}

							},

							error: function() {
								//失败提醒
								var error = "error!";
								console.log(error);
							}
						});

					};
				});
			},
			error: function() {
				//失败提醒
				var error = "保存失败！";
				console.log(error);
				//alert(error);
			}

		});
	});

</script>
</body>
</html>

